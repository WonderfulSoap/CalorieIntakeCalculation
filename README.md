# 卡路里计算与追踪工具

一个简单易用的网页应用，帮助用户计算每日卡路里需求并追踪营养摄入情况。

## 功能特点

- 基于个人信息计算基础代谢率(BMR)和每日卡路里需求
- 计算理想的蛋白质、脂肪和碳水化合物摄入量
- 记录每日食物摄入并计算总卡路里
- 按小时分组显示食物记录
- 显示营养摄入进度条
- 支持数据导入/导出功能
- 移动设备友好的数字键盘输入界面

## 计算原理

### 基础代谢率(BMR)计算

本工具使用Mifflin-St Jeor方程计算基础代谢率：

- 男性：BMR = (10 × 体重kg) + (6.25 × 身高cm) - (5 × 年龄) + 5
- 女性：BMR = (10 × 体重kg) + (6.25 × 身高cm) - (5 × 年龄) - 161

注：本工具使用平均身高（男性170cm，女性160cm）进行计算。

### 活动系数

基础代谢率乘以活动系数，得到每日总能量消耗：

| 活动水平 | 系数 | 描述 |
|---------|------|------|
| 纯基础代谢 | 1.0 | 不考虑活动 |
| 久坐不动 | 1.2 | 几乎不运动 |
| 轻度活动 | 1.375 | 每周轻度运动1-3天 |
| 中度活动 | 1.55 | 每周中度运动3-5天 |
| 高度活动 | 1.725 | 每周剧烈运动6-7天 |
| 极高活动 | 1.9 | 每天剧烈运动或体力劳动 |

### 目标卡路里计算

目标卡路里 = BMR - 300

这个公式假设用户希望轻度减脂。如需维持体重，可以直接使用BMR值；如需增肌，可以适当增加卡路里摄入。

### 营养素分配

- **蛋白质**：默认为体重的1.5倍（克/天），可自定义倍率
  - 推荐范围：1.2-2.2倍体重（增肌期可达2倍以上，减脂期1.5-2倍）
  - 每克蛋白质提供4卡路里

- **脂肪**：默认为体重的0.75倍（克/天），可自定义倍率
  - 推荐范围：0.3-1倍体重（人体必需脂肪摄入至少为0.3倍体重）
  - 每克脂肪提供9卡路里

- **碳水化合物**：使用剩余卡路里计算
  - 剩余卡路里 = 目标卡路里 - 蛋白质卡路里 - 脂肪卡路里
  - 碳水克数 = 剩余卡路里 ÷ 4（每克碳水提供4卡路里）

## 使用指南

### 计算每日需求

1. 打开"计算每日需求"页面
2. 输入您的体重（公斤）、年龄和性别
3. 选择您的活动水平
4. 可选：调整蛋白质和脂肪摄入倍率
5. 点击"计算需求"按钮
6. 查看计算结果，包括BMR、目标卡路里和各营养素需求

### 记录每日摄入

1. 打开"记录每日摄入"页面
2. 选择日期（默认为今天）
3. 在表单中输入食物的蛋白质、脂肪和碳水化合物含量（克）
4. 可选：输入食物名称
5. 点击"添加"按钮
6. 查看今日摄入总结和食物记录列表

### 数据导入/导出

- **导出数据**：点击"导出数据"按钮，将保存一个包含所有记录的JSON文件
- **导入数据**：点击"导入数据"按钮，选择之前导出的JSON文件进行导入

## 技术实现

- 使用HTML、CSS和JavaScript构建的纯前端应用
- 使用localStorage在浏览器本地存储数据
- 自定义数字键盘组件，优化移动设备输入体验
- 按小时分组显示食物记录，并计算每组占日目标的百分比

## 项目结构

- `index.html` - 主页
- `calculator.html` - 计算每日需求页面
- `calculator.js` - 计算逻辑实现
- `tracker.html` - 记录每日摄入页面
- `tracker.js` - 食物记录和追踪功能实现
- `numpad.js` - 自定义数字键盘组件
- `data-manager.js` - 数据导入/导出功能
- `styles.css` - 样式表

## 开始使用

1. 克隆或下载本仓库
2. 在浏览器中打开`index.html`文件
3. 首先使用"计算每日需求"功能设置您的目标
4. 然后使用"记录每日摄入"功能追踪您的营养摄入

## 注意事项

- 所有数据仅存储在浏览器本地，清除浏览器数据会导致记录丢失
- 请定期使用导出功能备份您的数据
- 本工具仅提供参考，不应替代专业营养建议
